<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mangal Script Typing Practice</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            height: 100vh;
            background-color: #f7f7f7;
            margin: 0;
            padding: 10px;
        }
        .editor-container {
            width: 100%;
            max-width: 600px; /* Reduce max width for better mobile fit */
        }
        h1 {
            font-size: 1.5rem;
            text-align: center;
        }
        textarea {
            width: 100%;
            height: 60vh; /* Dynamic height for mobile devices */
            padding: 10px;
            font-size: 18px;
            font-family: 'Mangal', 'Devanagari', sans-serif; /* Ensures Mangal font */
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            direction: ltr;
            resize: none; /* Disable resizing */
        }
        /* Ensures mobile responsiveness */
        @media (max-width: 600px) {
            textarea {
                height: 50vh;
                font-size: 16px;
            }
            h1 {
                font-size: 1.25rem;
            }
        }
    </style>
</head>
<body>

<div class="editor-container">
    <h1>Mangal Script Typing Practice</h1>
    <textarea id="hindiTextarea" placeholder="Type here..." autofocus></textarea>
</div>

<script>
    // Map of key codes to Mangal script characters (Inscript-like layout)
    const hindiKeyMap = {
       //A to L
       'a': 'ो', 'A': 'ओ','s': 'े', 'S': 'ए', 'd': '्', 'D': 'अ', 'f': 'ि', 'F': 'इ',
         'g': 'ु', 'G': 'उ', 'h': 'प','H': 'फ','j': 'र','J': 'ऱ','k': 'क','K': 'ख','l': 'त','L': 'थ',

        // Q to P
        'q': 'ौ', 'Q': 'औ','w': 'ै', 'W': 'ऐ', 'e': 'ा', 'E': 'आ', 'r': 'ी', 'R': 'ई',
         't': 'ू', 'T': 'ऊ', 'y': 'ब','Y': 'भ','u': 'ह','U': 'ङ','i': 'ग','I': 'घ','o': 'द','O': 'ध','p': 'ज','P': 'झ',

        // Z to Z
        
        'z': '', 'Z': '','x': 'ं', 'X': 'ँ', 'c': 'म', 'C': 'ण', 'v': 'न', 'V': '',
         'b': 'व', 'B': '', 'n': 'ल','N': 'ळ','m': 'स','M': 'श',
        
      
        // Numbers
        '1': '१', '2': '२', '3': '३', '4': '४', '5': '५', '6': '६', '7': '७', '8': '८', '9': '९', '0': '०',
        // Other signs
        '-': '।', '=': 'ऽ'
    };

    const hindiTextarea = document.getElementById('hindiTextarea');

    hindiTextarea.addEventListener('keypress', function (event) {
        const key = event.key;

        // If the key is in the mapping, prevent the default behavior
        if (hindiKeyMap[key]) {
            event.preventDefault();

            const hindiCharacter = hindiKeyMap[key];
            const currentText = hindiTextarea.value;
            const lastCharacter = currentText[currentText.length - 1]; // Get the last character

            // If the last character is the same as the current, add a space before the character
            if (lastCharacter === hindiCharacter) {
                insertAtCursor(hindiTextarea, ' ' + hindiCharacter);
            } else {
                insertAtCursor(hindiTextarea, hindiCharacter);
            }
        }
    });

    // Helper function to insert text at the cursor position
    function insertAtCursor(textArea, text) {
        const start = textArea.selectionStart;
        const end = textArea.selectionEnd;
        const before = textArea.value.substring(0, start);
        const after = textArea.value.substring(end, textArea.value.length);
        textArea.value = before + text + after;

        // Move the cursor after the inserted character
        textArea.selectionStart = textArea.selectionEnd = start + text.length;
    }
</script>

</body>
</html>
